{"version":3,"file":"mql.min.js","sources":["../node_modules/ky/umd.js","../node_modules/is-url-http/lightweight.js","../node_modules/qss/dist/qss.m.js","../node_modules/flattie/dist/index.js","../node_modules/mimic-fn/index.js","../node_modules/whoops/lib/helpers.js","../node_modules/whoops/lib/add-error-props.js","../node_modules/whoops/lib/create-extend-error.js","../node_modules/whoops/lib/create-error.js","../node_modules/whoops/lib/index.js","../src/factory.js","../src/browser.js"],"sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.ky = factory());\n}(this, (function () { 'use strict';\n\n\t/*! MIT License Â© Sindre Sorhus */\n\n\tconst globals = {};\n\n\tconst getGlobal = property => {\n\t\t/* istanbul ignore next */\n\t\tif (typeof self !== 'undefined' && self && property in self) {\n\t\t\treturn self;\n\t\t}\n\n\t\t/* istanbul ignore next */\n\t\tif (typeof window !== 'undefined' && window && property in window) {\n\t\t\treturn window;\n\t\t}\n\n\t\tif (typeof global !== 'undefined' && global && property in global) {\n\t\t\treturn global;\n\t\t}\n\n\t\t/* istanbul ignore next */\n\t\tif (typeof globalThis !== 'undefined' && globalThis) {\n\t\t\treturn globalThis;\n\t\t}\n\t};\n\n\tconst globalProperties = [\n\t\t'Headers',\n\t\t'Request',\n\t\t'Response',\n\t\t'ReadableStream',\n\t\t'fetch',\n\t\t'AbortController',\n\t\t'FormData'\n\t];\n\n\tfor (const property of globalProperties) {\n\t\tObject.defineProperty(globals, property, {\n\t\t\tget() {\n\t\t\t\tconst globalObject = getGlobal(property);\n\t\t\t\tconst value = globalObject && globalObject[property];\n\t\t\t\treturn typeof value === 'function' ? value.bind(globalObject) : value;\n\t\t\t}\n\t\t});\n\t}\n\n\tconst isObject = value => value !== null && typeof value === 'object';\n\tconst supportsAbortController = typeof globals.AbortController === 'function';\n\tconst supportsStreams = typeof globals.ReadableStream === 'function';\n\tconst supportsFormData = typeof globals.FormData === 'function';\n\n\tconst mergeHeaders = (source1, source2) => {\n\t\tconst result = new globals.Headers(source1 || {});\n\t\tconst isHeadersInstance = source2 instanceof globals.Headers;\n\t\tconst source = new globals.Headers(source2 || {});\n\n\t\tfor (const [key, value] of source) {\n\t\t\tif ((isHeadersInstance && value === 'undefined') || value === undefined) {\n\t\t\t\tresult.delete(key);\n\t\t\t} else {\n\t\t\t\tresult.set(key, value);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tconst deepMerge = (...sources) => {\n\t\tlet returnValue = {};\n\t\tlet headers = {};\n\n\t\tfor (const source of sources) {\n\t\t\tif (Array.isArray(source)) {\n\t\t\t\tif (!(Array.isArray(returnValue))) {\n\t\t\t\t\treturnValue = [];\n\t\t\t\t}\n\n\t\t\t\treturnValue = [...returnValue, ...source];\n\t\t\t} else if (isObject(source)) {\n\t\t\t\tfor (let [key, value] of Object.entries(source)) {\n\t\t\t\t\tif (isObject(value) && (key in returnValue)) {\n\t\t\t\t\t\tvalue = deepMerge(returnValue[key], value);\n\t\t\t\t\t}\n\n\t\t\t\t\treturnValue = {...returnValue, [key]: value};\n\t\t\t\t}\n\n\t\t\t\tif (isObject(source.headers)) {\n\t\t\t\t\theaders = mergeHeaders(headers, source.headers);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturnValue.headers = headers;\n\t\t}\n\n\t\treturn returnValue;\n\t};\n\n\tconst requestMethods = [\n\t\t'get',\n\t\t'post',\n\t\t'put',\n\t\t'patch',\n\t\t'head',\n\t\t'delete'\n\t];\n\n\tconst responseTypes = {\n\t\tjson: 'application/json',\n\t\ttext: 'text/*',\n\t\tformData: 'multipart/form-data',\n\t\tarrayBuffer: '*/*',\n\t\tblob: '*/*'\n\t};\n\n\tconst retryMethods = [\n\t\t'get',\n\t\t'put',\n\t\t'head',\n\t\t'delete',\n\t\t'options',\n\t\t'trace'\n\t];\n\n\tconst retryStatusCodes = [\n\t\t408,\n\t\t413,\n\t\t429,\n\t\t500,\n\t\t502,\n\t\t503,\n\t\t504\n\t];\n\n\tconst retryAfterStatusCodes = [\n\t\t413,\n\t\t429,\n\t\t503\n\t];\n\n\tconst stop = Symbol('stop');\n\n\tclass HTTPError extends Error {\n\t\tconstructor(response) {\n\t\t\t// Set the message to the status text, such as Unauthorized,\n\t\t\t// with some fallbacks. This message should never be undefined.\n\t\t\tsuper(\n\t\t\t\tresponse.statusText ||\n\t\t\t\tString(\n\t\t\t\t\t(response.status === 0 || response.status) ?\n\t\t\t\t\t\tresponse.status : 'Unknown response error'\n\t\t\t\t)\n\t\t\t);\n\t\t\tthis.name = 'HTTPError';\n\t\t\tthis.response = response;\n\t\t}\n\t}\n\n\tclass TimeoutError extends Error {\n\t\tconstructor(request) {\n\t\t\tsuper('Request timed out');\n\t\t\tthis.name = 'TimeoutError';\n\t\t\tthis.request = request;\n\t\t}\n\t}\n\n\tconst delay = ms => new Promise(resolve => setTimeout(resolve, ms));\n\n\t// `Promise.race()` workaround (#91)\n\tconst timeout = (request, abortController, options) =>\n\t\tnew Promise((resolve, reject) => {\n\t\t\tconst timeoutID = setTimeout(() => {\n\t\t\t\tif (abortController) {\n\t\t\t\t\tabortController.abort();\n\t\t\t\t}\n\n\t\t\t\treject(new TimeoutError(request));\n\t\t\t}, options.timeout);\n\n\t\t\t/* eslint-disable promise/prefer-await-to-then */\n\t\t\toptions.fetch(request)\n\t\t\t\t.then(resolve)\n\t\t\t\t.catch(reject)\n\t\t\t\t.then(() => {\n\t\t\t\t\tclearTimeout(timeoutID);\n\t\t\t\t});\n\t\t\t/* eslint-enable promise/prefer-await-to-then */\n\t\t});\n\n\tconst normalizeRequestMethod = input => requestMethods.includes(input) ? input.toUpperCase() : input;\n\n\tconst defaultRetryOptions = {\n\t\tlimit: 2,\n\t\tmethods: retryMethods,\n\t\tstatusCodes: retryStatusCodes,\n\t\tafterStatusCodes: retryAfterStatusCodes\n\t};\n\n\tconst normalizeRetryOptions = (retry = {}) => {\n\t\tif (typeof retry === 'number') {\n\t\t\treturn {\n\t\t\t\t...defaultRetryOptions,\n\t\t\t\tlimit: retry\n\t\t\t};\n\t\t}\n\n\t\tif (retry.methods && !Array.isArray(retry.methods)) {\n\t\t\tthrow new Error('retry.methods must be an array');\n\t\t}\n\n\t\tif (retry.statusCodes && !Array.isArray(retry.statusCodes)) {\n\t\t\tthrow new Error('retry.statusCodes must be an array');\n\t\t}\n\n\t\treturn {\n\t\t\t...defaultRetryOptions,\n\t\t\t...retry,\n\t\t\tafterStatusCodes: retryAfterStatusCodes\n\t\t};\n\t};\n\n\t// The maximum value of a 32bit int (see issue #117)\n\tconst maxSafeTimeout = 2147483647;\n\n\tclass Ky {\n\t\tconstructor(input, options = {}) {\n\t\t\tthis._retryCount = 0;\n\t\t\tthis._input = input;\n\t\t\tthis._options = {\n\t\t\t\t// TODO: credentials can be removed when the spec change is implemented in all browsers. Context: https://www.chromestatus.com/feature/4539473312350208\n\t\t\t\tcredentials: this._input.credentials || 'same-origin',\n\t\t\t\t...options,\n\t\t\t\theaders: mergeHeaders(this._input.headers, options.headers),\n\t\t\t\thooks: deepMerge({\n\t\t\t\t\tbeforeRequest: [],\n\t\t\t\t\tbeforeRetry: [],\n\t\t\t\t\tafterResponse: []\n\t\t\t\t}, options.hooks),\n\t\t\t\tmethod: normalizeRequestMethod(options.method || this._input.method),\n\t\t\t\tprefixUrl: String(options.prefixUrl || ''),\n\t\t\t\tretry: normalizeRetryOptions(options.retry),\n\t\t\t\tthrowHttpErrors: options.throwHttpErrors !== false,\n\t\t\t\ttimeout: typeof options.timeout === 'undefined' ? 10000 : options.timeout,\n\t\t\t\tfetch: options.fetch || globals.fetch\n\t\t\t};\n\n\t\t\tif (typeof this._input !== 'string' && !(this._input instanceof URL || this._input instanceof globals.Request)) {\n\t\t\t\tthrow new TypeError('`input` must be a string, URL, or Request');\n\t\t\t}\n\n\t\t\tif (this._options.prefixUrl && typeof this._input === 'string') {\n\t\t\t\tif (this._input.startsWith('/')) {\n\t\t\t\t\tthrow new Error('`input` must not begin with a slash when using `prefixUrl`');\n\t\t\t\t}\n\n\t\t\t\tif (!this._options.prefixUrl.endsWith('/')) {\n\t\t\t\t\tthis._options.prefixUrl += '/';\n\t\t\t\t}\n\n\t\t\t\tthis._input = this._options.prefixUrl + this._input;\n\t\t\t}\n\n\t\t\tif (supportsAbortController) {\n\t\t\t\tthis.abortController = new globals.AbortController();\n\t\t\t\tif (this._options.signal) {\n\t\t\t\t\tthis._options.signal.addEventListener('abort', () => {\n\t\t\t\t\t\tthis.abortController.abort();\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis._options.signal = this.abortController.signal;\n\t\t\t}\n\n\t\t\tthis.request = new globals.Request(this._input, this._options);\n\n\t\t\tif (this._options.searchParams) {\n\t\t\t\tconst searchParams = '?' + new URLSearchParams(this._options.searchParams).toString();\n\t\t\t\tconst url = this.request.url.replace(/(?:\\?.*?)?(?=#|$)/, searchParams);\n\n\t\t\t\t// To provide correct form boundary, Content-Type header should be deleted each time when new Request instantiated from another one\n\t\t\t\tif (((supportsFormData && this._options.body instanceof globals.FormData) || this._options.body instanceof URLSearchParams) && !(this._options.headers && this._options.headers['content-type'])) {\n\t\t\t\t\tthis.request.headers.delete('content-type');\n\t\t\t\t}\n\n\t\t\t\tthis.request = new globals.Request(new globals.Request(url, this.request), this._options);\n\t\t\t}\n\n\t\t\tif (this._options.json !== undefined) {\n\t\t\t\tthis._options.body = JSON.stringify(this._options.json);\n\t\t\t\tthis.request.headers.set('content-type', 'application/json');\n\t\t\t\tthis.request = new globals.Request(this.request, {body: this._options.body});\n\t\t\t}\n\n\t\t\tconst fn = async () => {\n\t\t\t\tif (this._options.timeout > maxSafeTimeout) {\n\t\t\t\t\tthrow new RangeError(`The \\`timeout\\` option cannot be greater than ${maxSafeTimeout}`);\n\t\t\t\t}\n\n\t\t\t\tawait delay(1);\n\t\t\t\tlet response = await this._fetch();\n\n\t\t\t\tfor (const hook of this._options.hooks.afterResponse) {\n\t\t\t\t\t// eslint-disable-next-line no-await-in-loop\n\t\t\t\t\tconst modifiedResponse = await hook(\n\t\t\t\t\t\tthis.request,\n\t\t\t\t\t\tthis._options,\n\t\t\t\t\t\tthis._decorateResponse(response.clone())\n\t\t\t\t\t);\n\n\t\t\t\t\tif (modifiedResponse instanceof globals.Response) {\n\t\t\t\t\t\tresponse = modifiedResponse;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._decorateResponse(response);\n\n\t\t\t\tif (!response.ok && this._options.throwHttpErrors) {\n\t\t\t\t\tthrow new HTTPError(response);\n\t\t\t\t}\n\n\t\t\t\t// If `onDownloadProgress` is passed, it uses the stream API internally\n\t\t\t\t/* istanbul ignore next */\n\t\t\t\tif (this._options.onDownloadProgress) {\n\t\t\t\t\tif (typeof this._options.onDownloadProgress !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('The `onDownloadProgress` option must be a function');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!supportsStreams) {\n\t\t\t\t\t\tthrow new Error('Streams are not supported in your environment. `ReadableStream` is missing.');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this._stream(response.clone(), this._options.onDownloadProgress);\n\t\t\t\t}\n\n\t\t\t\treturn response;\n\t\t\t};\n\n\t\t\tconst isRetriableMethod = this._options.retry.methods.includes(this.request.method.toLowerCase());\n\t\t\tconst result = isRetriableMethod ? this._retry(fn) : fn();\n\n\t\t\tfor (const [type, mimeType] of Object.entries(responseTypes)) {\n\t\t\t\tresult[type] = async () => {\n\t\t\t\t\tthis.request.headers.set('accept', this.request.headers.get('accept') || mimeType);\n\n\t\t\t\t\tconst response = (await result).clone();\n\n\t\t\t\t\tif (type === 'json') {\n\t\t\t\t\t\tif (response.status === 204) {\n\t\t\t\t\t\t\treturn '';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (options.parseJson) {\n\t\t\t\t\t\t\treturn options.parseJson(await response.text());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn response[type]();\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\t_calculateRetryDelay(error) {\n\t\t\tthis._retryCount++;\n\n\t\t\tif (this._retryCount < this._options.retry.limit && !(error instanceof TimeoutError)) {\n\t\t\t\tif (error instanceof HTTPError) {\n\t\t\t\t\tif (!this._options.retry.statusCodes.includes(error.response.status)) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst retryAfter = error.response.headers.get('Retry-After');\n\t\t\t\t\tif (retryAfter && this._options.retry.afterStatusCodes.includes(error.response.status)) {\n\t\t\t\t\t\tlet after = Number(retryAfter);\n\t\t\t\t\t\tif (Number.isNaN(after)) {\n\t\t\t\t\t\t\tafter = Date.parse(retryAfter) - Date.now();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tafter *= 1000;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof this._options.retry.maxRetryAfter !== 'undefined' && after > this._options.retry.maxRetryAfter) {\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn after;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (error.response.status === 413) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst BACKOFF_FACTOR = 0.3;\n\t\t\t\treturn BACKOFF_FACTOR * (2 ** (this._retryCount - 1)) * 1000;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\t_decorateResponse(response) {\n\t\t\tif (this._options.parseJson) {\n\t\t\t\tresponse.json = async () => {\n\t\t\t\t\treturn this._options.parseJson(await response.text());\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn response;\n\t\t}\n\n\t\tasync _retry(fn) {\n\t\t\ttry {\n\t\t\t\treturn await fn();\n\t\t\t} catch (error) {\n\t\t\t\tconst ms = Math.min(this._calculateRetryDelay(error), maxSafeTimeout);\n\t\t\t\tif (ms !== 0 && this._retryCount > 0) {\n\t\t\t\t\tawait delay(ms);\n\n\t\t\t\t\tfor (const hook of this._options.hooks.beforeRetry) {\n\t\t\t\t\t\t// eslint-disable-next-line no-await-in-loop\n\t\t\t\t\t\tconst hookResult = await hook({\n\t\t\t\t\t\t\trequest: this.request,\n\t\t\t\t\t\t\toptions: this._options,\n\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\tretryCount: this._retryCount\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// If `stop` is returned from the hook, the retry process is stopped\n\t\t\t\t\t\tif (hookResult === stop) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this._retry(fn);\n\t\t\t\t}\n\n\t\t\t\tif (this._options.throwHttpErrors) {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync _fetch() {\n\t\t\tfor (const hook of this._options.hooks.beforeRequest) {\n\t\t\t\t// eslint-disable-next-line no-await-in-loop\n\t\t\t\tconst result = await hook(this.request, this._options);\n\n\t\t\t\tif (result instanceof Request) {\n\t\t\t\t\tthis.request = result;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (result instanceof Response) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this._options.timeout === false) {\n\t\t\t\treturn this._options.fetch(this.request.clone());\n\t\t\t}\n\n\t\t\treturn timeout(this.request.clone(), this.abortController, this._options);\n\t\t}\n\n\t\t/* istanbul ignore next */\n\t\t_stream(response, onDownloadProgress) {\n\t\t\tconst totalBytes = Number(response.headers.get('content-length')) || 0;\n\t\t\tlet transferredBytes = 0;\n\n\t\t\treturn new globals.Response(\n\t\t\t\tnew globals.ReadableStream({\n\t\t\t\t\tstart(controller) {\n\t\t\t\t\t\tconst reader = response.body.getReader();\n\n\t\t\t\t\t\tif (onDownloadProgress) {\n\t\t\t\t\t\t\tonDownloadProgress({percent: 0, transferredBytes: 0, totalBytes}, new Uint8Array());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tasync function read() {\n\t\t\t\t\t\t\tconst {done, value} = await reader.read();\n\t\t\t\t\t\t\tif (done) {\n\t\t\t\t\t\t\t\tcontroller.close();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (onDownloadProgress) {\n\t\t\t\t\t\t\t\ttransferredBytes += value.byteLength;\n\t\t\t\t\t\t\t\tconst percent = totalBytes === 0 ? 0 : transferredBytes / totalBytes;\n\t\t\t\t\t\t\t\tonDownloadProgress({percent, transferredBytes, totalBytes}, value);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcontroller.enqueue(value);\n\t\t\t\t\t\t\tread();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tread();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\tconst validateAndMerge = (...sources) => {\n\t\tfor (const source of sources) {\n\t\t\tif ((!isObject(source) || Array.isArray(source)) && typeof source !== 'undefined') {\n\t\t\t\tthrow new TypeError('The `options` argument must be an object');\n\t\t\t}\n\t\t}\n\n\t\treturn deepMerge({}, ...sources);\n\t};\n\n\tconst createInstance = defaults => {\n\t\tconst ky = (input, options) => new Ky(input, validateAndMerge(defaults, options));\n\n\t\tfor (const method of requestMethods) {\n\t\t\tky[method] = (input, options) => new Ky(input, validateAndMerge(defaults, options, {method}));\n\t\t}\n\n\t\tky.HTTPError = HTTPError;\n\t\tky.TimeoutError = TimeoutError;\n\t\tky.create = newDefaults => createInstance(validateAndMerge(newDefaults));\n\t\tky.extend = newDefaults => createInstance(validateAndMerge(defaults, newDefaults));\n\t\tky.stop = stop;\n\n\t\treturn ky;\n\t};\n\n\tvar index = createInstance();\n\n\treturn index;\n\n})));\n","'use strict'\n\nconst URL = global.window ? window.URL : require('url').URL\nconst REGEX_HTTP_PROTOCOL = /^https?:\\/\\//i\n\nmodule.exports = url => {\n  try {\n    return REGEX_HTTP_PROTOCOL.test(new URL(url).href)\n  } catch (err) {\n    return false\n  }\n}\n","export function encode(obj, pfx) {\n\tvar k, i, tmp, str='';\n\n\tfor (k in obj) {\n\t\tif ((tmp = obj[k]) !== void 0) {\n\t\t\tif (Array.isArray(tmp)) {\n\t\t\t\tfor (i=0; i < tmp.length; i++) {\n\t\t\t\t\tstr && (str += '&');\n\t\t\t\t\tstr += encodeURIComponent(k) + '=' + encodeURIComponent(tmp[i]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tstr && (str += '&');\n\t\t\t\tstr += encodeURIComponent(k) + '=' + encodeURIComponent(tmp);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn (pfx || '') + str;\n}\n\nfunction toValue(mix) {\n\tif (!mix) return '';\n\tvar str = decodeURIComponent(mix);\n\tif (str === 'false') return false;\n\tif (str === 'true') return true;\n\treturn (+str * 0 === 0) ? (+str) : str;\n}\n\nexport function decode(str) {\n\tvar tmp, k, out={}, arr=str.split('&');\n\n\twhile (tmp = arr.shift()) {\n\t\ttmp = tmp.split('=');\n\t\tk = tmp.shift();\n\t\tif (out[k] !== void 0) {\n\t\t\tout[k] = [].concat(out[k], toValue(tmp.shift()));\n\t\t} else {\n\t\t\tout[k] = toValue(tmp.shift());\n\t\t}\n\t}\n\n\treturn out;\n}\n","function iter(output, nullish, sep, val, key) {\n\tvar k, pfx = key ? (key + sep) : key;\n\n\tif (val == null) {\n\t\tif (nullish) output[key] = val;\n\t} else if (typeof val != 'object') {\n\t\toutput[key] = val;\n\t} else if (Array.isArray(val)) {\n\t\tfor (k=0; k < val.length; k++) {\n\t\t\titer(output, nullish, sep, val[k], pfx + k);\n\t\t}\n\t} else {\n\t\tfor (k in val) {\n\t\t\titer(output, nullish, sep, val[k], pfx + k);\n\t\t}\n\t}\n}\n\nfunction flattie(input, glue, toNull) {\n\tvar output = {};\n\tif (typeof input == 'object') {\n\t\titer(output, !!toNull, glue || '.', input, '');\n\t}\n\treturn output;\n}\n\nexports.flattie = flattie;","'use strict';\n\nconst copyProperty = (to, from, property, ignoreNonConfigurable) => {\n\t// `Function#length` should reflect the parameters of `to` not `from` since we keep its body.\n\t// `Function#prototype` is non-writable and non-configurable so can never be modified.\n\tif (property === 'length' || property === 'prototype') {\n\t\treturn;\n\t}\n\n\tconst toDescriptor = Object.getOwnPropertyDescriptor(to, property);\n\tconst fromDescriptor = Object.getOwnPropertyDescriptor(from, property);\n\n\tif (!canCopyProperty(toDescriptor, fromDescriptor) && ignoreNonConfigurable) {\n\t\treturn;\n\t}\n\n\tObject.defineProperty(to, property, fromDescriptor);\n};\n\n// `Object.defineProperty()` throws if the property exists, is not configurable and either:\n//  - one its descriptors is changed\n//  - it is non-writable and its value is changed\nconst canCopyProperty = function (toDescriptor, fromDescriptor) {\n\treturn toDescriptor === undefined || toDescriptor.configurable || (\n\t\ttoDescriptor.writable === fromDescriptor.writable &&\n\t\ttoDescriptor.enumerable === fromDescriptor.enumerable &&\n\t\ttoDescriptor.configurable === fromDescriptor.configurable &&\n\t\t(toDescriptor.writable || toDescriptor.value === fromDescriptor.value)\n\t);\n};\n\nconst changePrototype = (to, from) => {\n\tconst fromPrototype = Object.getPrototypeOf(from);\n\tif (fromPrototype === Object.getPrototypeOf(to)) {\n\t\treturn;\n\t}\n\n\tObject.setPrototypeOf(to, fromPrototype);\n};\n\nconst wrappedToString = (withName, fromBody) => `/* Wrapped ${withName}*/\\n${fromBody}`;\n\nconst toStringDescriptor = Object.getOwnPropertyDescriptor(Function.prototype, 'toString');\nconst toStringName = Object.getOwnPropertyDescriptor(Function.prototype.toString, 'name');\n\n// We call `from.toString()` early (not lazily) to ensure `from` can be garbage collected.\n// We use `bind()` instead of a closure for the same reason.\n// Calling `from.toString()` early also allows caching it in case `to.toString()` is called several times.\nconst changeToString = (to, from, name) => {\n\tconst withName = name === '' ? '' : `with ${name.trim()}() `;\n\tconst newToString = wrappedToString.bind(null, withName, from.toString());\n\t// Ensure `to.toString.toString` is non-enumerable and has the same `same`\n\tObject.defineProperty(newToString, 'name', toStringName);\n\tObject.defineProperty(to, 'toString', {...toStringDescriptor, value: newToString});\n};\n\nconst mimicFn = (to, from, {ignoreNonConfigurable = false} = {}) => {\n\tconst {name} = to;\n\n\tfor (const property of Reflect.ownKeys(from)) {\n\t\tcopyProperty(to, from, property, ignoreNonConfigurable);\n\t}\n\n\tchangePrototype(to, from);\n\tchangeToString(to, from, name);\n\n\treturn to;\n};\n\nmodule.exports = mimicFn;\n","'use strict'\n\nmodule.exports = {\n  isFunction: obj => typeof obj === 'function',\n  isString: obj => typeof obj === 'string',\n  composeErrorMessage: (code, description) => `${code}, ${description}`,\n  inherits: (ctor, superCtor) => {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    })\n  }\n}\n","'use strict'\n\nconst {isFunction, composeErrorMessage} = require('./helpers')\n\nfunction interfaceObject (error, ...props) {\n  Object.assign(error, ...props)\n\n  error.description = isFunction(error.message) ? error.message(error) : error.message\n\n  error.message = error.code\n   ? composeErrorMessage(error.code, error.description)\n   : error.description\n}\n\nmodule.exports = interfaceObject\n","'use strict'\n\nconst cleanStack = require('clean-stack')\nconst mimicFn = require('mimic-fn')\n\nconst addErrorProps = require('./add-error-props')\nconst {isString} = require('./helpers')\n\nfunction createExtendError (ErrorClass, classProps) {\n  function ExtendError (props) {\n    const error = new ErrorClass()\n    const errorProps = isString(props) ? {message: props} : props\n    addErrorProps(error, classProps, errorProps)\n\n    error.stack = cleanStack(error.stack)\n    return error\n  }\n\n  ExtendError.prototype = ErrorClass.prototype\n  mimicFn(ExtendError, ErrorClass)\n\n  return ExtendError\n}\n\nmodule.exports = createExtendError\n","'use strict'\n\nconst {inherits} = require('./helpers')\nconst mimicFn = require('mimic-fn')\n\nconst REGEX_CLASS_NAME = /[^0-9a-zA-Z_$]/\n\nfunction createError (className) {\n  if (typeof className !== 'string') {\n    throw new TypeError('Expected className to be a string')\n  }\n\n  if (REGEX_CLASS_NAME.test(className)) {\n    throw new Error('className contains invalid characters')\n  }\n\n  function ErrorClass () {\n    Object.defineProperty(this, 'name', {\n      configurable: true,\n      value: className,\n      writable: true\n    })\n\n    Error.captureStackTrace(this, this.constructor)\n  }\n\n  inherits(ErrorClass, Error)\n  mimicFn(ErrorClass, Error)\n  return ErrorClass\n}\n\nmodule.exports = createError\n","'use strict'\n\nconst createExtendError = require('./create-extend-error')\nconst createError = require('./create-error')\n\nconst createErrorClass = ErrorClass => (className, props) => {\n  const errorClass = createError(className || ErrorClass.name)\n  return createExtendError(errorClass, props)\n}\n\nmodule.exports = createErrorClass(Error)\nmodule.exports.type = createErrorClass(TypeError)\nmodule.exports.range = createErrorClass(RangeError)\nmodule.exports.eval = createErrorClass(EvalError)\nmodule.exports.syntax = createErrorClass(SyntaxError)\nmodule.exports.reference = createErrorClass(ReferenceError)\nmodule.exports.uri = createErrorClass(URIError)\n","const ENDPOINT = {\n  FREE: 'https://api.microlink.io',\n  PRO: 'https://pro.microlink.io'\n}\n\nconst isObject = input => typeof input === 'object'\n\nconst pickBy = obj => {\n  Object.keys(obj).forEach(key => obj[key] == null && delete obj[key])\n  return obj\n}\n\nconst parseBody = (input, error, url) => {\n  try {\n    return JSON.parse(input)\n  } catch (_) {\n    const message = input || error.message\n\n    return {\n      status: 'error',\n      data: { url: message },\n      more: 'https://microlink.io/efatal',\n      code: 'EFATAL',\n      message,\n      url\n    }\n  }\n}\n\nconst factory = ({ VERSION, MicrolinkError, isUrlHttp, stringify, got, flatten }) => {\n  const assertUrl = (url = '') => {\n    if (!isUrlHttp(url)) {\n      const message = `The \\`url\\` as \\`${url}\\` is not valid. Ensure it has protocol (http or https) and hostname.`\n      throw new MicrolinkError({\n        status: 'fail',\n        data: { url: message },\n        more: 'https://microlink.io/docs/api/api-parameters/url',\n        code: 'EINVALURLCLIENT',\n        message,\n        url\n      })\n    }\n  }\n\n  const mapRules = rules => {\n    if (!isObject(rules)) return\n    const flatRules = flatten(rules)\n    return Object.keys(flatRules).reduce(\n      (acc, key) => ({ ...acc, [`data.${key}`]: flatRules[key] }),\n      {}\n    )\n  }\n\n  const fetchFromApi = async (apiUrl, opts = {}) => {\n    try {\n      const response = await got(apiUrl, opts)\n      return opts.responseType === 'buffer'\n        ? { body: response.body, response }\n        : { ...response.body, response }\n    } catch (err) {\n      const { response = {} } = err\n      const { statusCode, body: rawBody, headers, url: uri = apiUrl } = response\n\n      const body =\n        isObject(rawBody) && !Buffer.isBuffer(rawBody) ? rawBody : parseBody(rawBody, err, uri)\n\n      throw MicrolinkError({\n        ...body,\n        message: body.message,\n        url: uri,\n        statusCode,\n        headers\n      })\n    }\n  }\n\n  const getApiUrl = (\n    url,\n    { data, apiKey, endpoint, retry, cache, ...opts } = {},\n    { responseType = 'json', headers: gotHeaders, ...gotOpts } = {}\n  ) => {\n    const isPro = !!apiKey\n    const apiEndpoint = endpoint || ENDPOINT[isPro ? 'PRO' : 'FREE']\n\n    const apiUrl = `${apiEndpoint}?${stringify({\n      url,\n      ...mapRules(data),\n      ...flatten(pickBy(opts))\n    })}`\n\n    const headers = isPro ? { ...gotHeaders, 'x-api-key': apiKey } : { ...gotHeaders }\n    return [apiUrl, { ...gotOpts, responseType, cache, retry, headers }]\n  }\n\n  const createMql = defaultOpts => async (url, opts, gotOpts) => {\n    assertUrl(url)\n    const [apiUrl, fetchOpts] = getApiUrl(url, opts, {\n      ...defaultOpts,\n      ...gotOpts\n    })\n    return fetchFromApi(apiUrl, fetchOpts)\n  }\n\n  const mql = createMql()\n  mql.MicrolinkError = MicrolinkError\n  mql.getApiUrl = getApiUrl\n  mql.fetchFromApi = fetchFromApi\n  mql.mapRules = mapRules\n  mql.version = VERSION\n  mql.stream = got.stream\n  mql.buffer = createMql({ responseType: 'buffer' })\n\n  return mql\n}\n\nmodule.exports = factory\n","'use strict'\n\nconst ky = require('ky-universal').default || require('ky-universal')\nconst isUrlHttp = require('is-url-http/lightweight')\nconst { encode: stringify } = require('qss')\nconst { flattie: flatten } = require('flattie')\nconst whoops = require('whoops')\n\nconst factory = require('./factory')\n\nconst MicrolinkError = whoops('MicrolinkError')\n\nconst got = async (url, opts) => {\n  try {\n    if (opts.timeout === undefined) opts.timeout = false\n    const response = await ky(url, opts)\n    const body = await response.json()\n    const { headers, status: statusCode, statusText: statusMessage } = response\n    return { url: response.url, body, headers, statusCode, statusMessage }\n  } catch (err) {\n    if (err.response) {\n      const { response } = err\n      err.response = {\n        ...response,\n        headers: [...response.headers.entries()].reduce(\n          (acc, [key, value]) => ({ ...acc, [key]: value }),\n          {}\n        ),\n        statusCode: response.status,\n        body: await response.text()\n      }\n    }\n    throw err\n  }\n}\n\nmodule.exports = factory({\n  MicrolinkError,\n  isUrlHttp,\n  stringify,\n  got,\n  flatten,\n  VERSION: '__VERSION__'\n})\n"],"names":["module","globals","getGlobal","property","self","window","global","globalThis","globalProperties","Object","defineProperty","[object Object]","globalObject","value","bind","isObject","supportsAbortController","AbortController","supportsStreams","ReadableStream","supportsFormData","FormData","mergeHeaders","source1","source2","result","Headers","isHeadersInstance","source","key","undefined","delete","set","deepMerge","sources","returnValue","headers","Array","isArray","entries","requestMethods","responseTypes","json","text","formData","arrayBuffer","blob","retryMethods","retryStatusCodes","retryAfterStatusCodes","stop","Symbol","HTTPError","Error","response","super","statusText","String","status","this","name","TimeoutError","request","delay","ms","Promise","resolve","setTimeout","timeout","abortController","options","reject","timeoutID","abort","fetch","then","catch","clearTimeout","normalizeRequestMethod","input","includes","toUpperCase","defaultRetryOptions","limit","methods","statusCodes","afterStatusCodes","normalizeRetryOptions","retry","maxSafeTimeout","Ky","_retryCount","_input","_options","credentials","hooks","beforeRequest","beforeRetry","afterResponse","method","prefixUrl","throwHttpErrors","URL","Request","TypeError","startsWith","endsWith","signal","addEventListener","searchParams","URLSearchParams","toString","url","replace","body","JSON","stringify","fn","async","RangeError","_fetch","hook","modifiedResponse","_decorateResponse","clone","Response","ok","onDownloadProgress","_stream","toLowerCase","_retry","type","mimeType","get","parseJson","error","retryAfter","after","Number","isNaN","Date","parse","now","maxRetryAfter","Math","min","_calculateRetryDelay","retryCount","totalBytes","transferredBytes","controller","reader","getReader","read","done","close","byteLength","percent","enqueue","Uint8Array","validateAndMerge","createInstance","defaults","ky","create","newDefaults","extend","factory","require$$0","REGEX_HTTP_PROTOCOL","toValue","mix","str","decodeURIComponent","obj","pfx","k","i","tmp","length","encodeURIComponent","out","arr","split","shift","concat","iter","output","nullish","sep","val","glue","toNull","copyProperty","to","from","ignoreNonConfigurable","toDescriptor","getOwnPropertyDescriptor","fromDescriptor","canCopyProperty","configurable","writable","enumerable","wrappedToString","withName","fromBody","toStringDescriptor","Function","prototype","toStringName","Reflect","ownKeys","fromPrototype","getPrototypeOf","setPrototypeOf","changePrototype","trim","newToString","changeToString","isFunction","isString","composeErrorMessage","code","description","inherits","ctor","superCtor","super_","constructor","props","assign","message","ErrorClass","classProps","ExtendError","errorProps","addErrorProps","stack","cleanStack","mimicFn","REGEX_CLASS_NAME","className","test","captureStackTrace","createErrorClass","errorClass","createError","createExtendError","EvalError","SyntaxError","ReferenceError","URIError","ENDPOINT","FREE","PRO","VERSION","MicrolinkError","isUrlHttp","got","flatten","mapRules","rules","flatRules","keys","reduce","acc","fetchFromApi","apiUrl","opts","responseType","err","statusCode","rawBody","uri","Buffer","isBuffer","_","data","more","parseBody","getApiUrl","apiKey","endpoint","cache","gotHeaders","gotOpts","isPro","forEach","x-api-key","createMql","defaultOpts","assertUrl","fetchOpts","mql","version","stream","buffer","default","encode","require$$1","flattie","require$$2","whoops","href","statusMessage"],"mappings":"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"}