{"version":3,"file":"mql.min.js","sources":["../node_modules/ky/umd.js","../node_modules/is-url-http/lightweight.js","../node_modules/qss/dist/qss.m.js","../node_modules/mimic-fn/index.js","../node_modules/whoops/lib/helpers.js","../node_modules/whoops/lib/add-error-props.js","../node_modules/whoops/lib/create-extend-error.js","../node_modules/whoops/lib/create-error.js","../node_modules/whoops/lib/index.js","../node_modules/is-buffer/index.js","../node_modules/flat/index.js","../src/factory.js","../src/browser.js"],"sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global = global || self, global.ky = factory());\n}(this, (function () { 'use strict';\n\n\t/*! MIT License Â© Sindre Sorhus */\n\n\tconst globals = {};\n\n\tconst getGlobal = property => {\n\t\t/* istanbul ignore next */\n\t\tif (typeof self !== 'undefined' && self && property in self) {\n\t\t\treturn self;\n\t\t}\n\n\t\t/* istanbul ignore next */\n\t\tif (typeof window !== 'undefined' && window && property in window) {\n\t\t\treturn window;\n\t\t}\n\n\t\tif (typeof global !== 'undefined' && global && property in global) {\n\t\t\treturn global;\n\t\t}\n\n\t\t/* istanbul ignore next */\n\t\tif (typeof globalThis !== 'undefined' && globalThis) {\n\t\t\treturn globalThis;\n\t\t}\n\t};\n\n\tconst globalProperties = [\n\t\t'Headers',\n\t\t'Request',\n\t\t'Response',\n\t\t'ReadableStream',\n\t\t'fetch',\n\t\t'AbortController',\n\t\t'FormData'\n\t];\n\n\tfor (const property of globalProperties) {\n\t\tObject.defineProperty(globals, property, {\n\t\t\tget() {\n\t\t\t\tconst globalObject = getGlobal(property);\n\t\t\t\tconst value = globalObject && globalObject[property];\n\t\t\t\treturn typeof value === 'function' ? value.bind(globalObject) : value;\n\t\t\t}\n\t\t});\n\t}\n\n\tconst isObject = value => value !== null && typeof value === 'object';\n\tconst supportsAbortController = typeof globals.AbortController === 'function';\n\tconst supportsStreams = typeof globals.ReadableStream === 'function';\n\n\tconst deepMerge = (...sources) => {\n\t\tlet returnValue = {};\n\n\t\tfor (const source of sources) {\n\t\t\tif (Array.isArray(source)) {\n\t\t\t\tif (!(Array.isArray(returnValue))) {\n\t\t\t\t\treturnValue = [];\n\t\t\t\t}\n\n\t\t\t\treturnValue = [...returnValue, ...source];\n\t\t\t} else if (isObject(source)) {\n\t\t\t\tfor (let [key, value] of Object.entries(source)) {\n\t\t\t\t\tif (isObject(value) && Reflect.has(returnValue, key)) {\n\t\t\t\t\t\tvalue = deepMerge(returnValue[key], value);\n\t\t\t\t\t}\n\n\t\t\t\t\treturnValue = {...returnValue, [key]: value};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn returnValue;\n\t};\n\n\tconst requestMethods = [\n\t\t'get',\n\t\t'post',\n\t\t'put',\n\t\t'patch',\n\t\t'head',\n\t\t'delete'\n\t];\n\n\tconst responseTypes = {\n\t\tjson: 'application/json',\n\t\ttext: 'text/*',\n\t\tformData: 'multipart/form-data',\n\t\tarrayBuffer: '*/*',\n\t\tblob: '*/*'\n\t};\n\n\tconst retryMethods = [\n\t\t'get',\n\t\t'put',\n\t\t'head',\n\t\t'delete',\n\t\t'options',\n\t\t'trace'\n\t];\n\n\tconst retryStatusCodes = [\n\t\t408,\n\t\t413,\n\t\t429,\n\t\t500,\n\t\t502,\n\t\t503,\n\t\t504\n\t];\n\n\tconst retryAfterStatusCodes = [\n\t\t413,\n\t\t429,\n\t\t503\n\t];\n\n\tconst stop = Symbol('stop');\n\n\tclass HTTPError extends Error {\n\t\tconstructor(response) {\n\t\t\tsuper(response.statusText);\n\t\t\tthis.name = 'HTTPError';\n\t\t\tthis.response = response;\n\t\t}\n\t}\n\n\tclass TimeoutError extends Error {\n\t\tconstructor() {\n\t\t\tsuper('Request timed out');\n\t\t\tthis.name = 'TimeoutError';\n\t\t}\n\t}\n\n\tconst delay = ms => new Promise(resolve => setTimeout(resolve, ms));\n\n\t// `Promise.race()` workaround (#91)\n\tconst timeout = (promise, ms, abortController) =>\n\t\tnew Promise((resolve, reject) => {\n\t\t\tconst timeoutID = setTimeout(() => {\n\t\t\t\tif (abortController) {\n\t\t\t\t\tabortController.abort();\n\t\t\t\t}\n\n\t\t\t\treject(new TimeoutError());\n\t\t\t}, ms);\n\n\t\t\t/* eslint-disable promise/prefer-await-to-then */\n\t\t\tpromise\n\t\t\t\t.then(resolve)\n\t\t\t\t.catch(reject)\n\t\t\t\t.then(() => {\n\t\t\t\t\tclearTimeout(timeoutID);\n\t\t\t\t});\n\t\t\t/* eslint-enable promise/prefer-await-to-then */\n\t\t});\n\n\tconst normalizeRequestMethod = input => requestMethods.includes(input) ? input.toUpperCase() : input;\n\n\tconst defaultRetryOptions = {\n\t\tlimit: 2,\n\t\tmethods: retryMethods,\n\t\tstatusCodes: retryStatusCodes,\n\t\tafterStatusCodes: retryAfterStatusCodes\n\t};\n\n\tconst normalizeRetryOptions = (retry = {}) => {\n\t\tif (typeof retry === 'number') {\n\t\t\treturn {\n\t\t\t\t...defaultRetryOptions,\n\t\t\t\tlimit: retry\n\t\t\t};\n\t\t}\n\n\t\tif (retry.methods && !Array.isArray(retry.methods)) {\n\t\t\tthrow new Error('retry.methods must be an array');\n\t\t}\n\n\t\tif (retry.statusCodes && !Array.isArray(retry.statusCodes)) {\n\t\t\tthrow new Error('retry.statusCodes must be an array');\n\t\t}\n\n\t\treturn {\n\t\t\t...defaultRetryOptions,\n\t\t\t...retry,\n\t\t\tafterStatusCodes: retryAfterStatusCodes\n\t\t};\n\t};\n\n\t// The maximum value of a 32bit int (see issue #117)\n\tconst maxSafeTimeout = 2147483647;\n\n\tclass Ky {\n\t\tconstructor(input, options = {}) {\n\t\t\tthis._retryCount = 0;\n\t\t\tthis._input = input;\n\t\t\tthis._options = {\n\t\t\t\t// TODO: credentials can be removed when the spec change is implemented in all browsers. Context: https://www.chromestatus.com/feature/4539473312350208\n\t\t\t\tcredentials: this._input.credentials || 'same-origin',\n\t\t\t\t...options,\n\t\t\t\thooks: deepMerge({\n\t\t\t\t\tbeforeRequest: [],\n\t\t\t\t\tbeforeRetry: [],\n\t\t\t\t\tafterResponse: []\n\t\t\t\t}, options.hooks),\n\t\t\t\tmethod: normalizeRequestMethod(options.method || this._input.method),\n\t\t\t\tprefixUrl: String(options.prefixUrl || ''),\n\t\t\t\tretry: normalizeRetryOptions(options.retry),\n\t\t\t\tthrowHttpErrors: options.throwHttpErrors !== false,\n\t\t\t\ttimeout: typeof options.timeout === 'undefined' ? 10000 : options.timeout\n\t\t\t};\n\n\t\t\tif (typeof this._input !== 'string' && !(this._input instanceof URL || this._input instanceof globals.Request)) {\n\t\t\t\tthrow new TypeError('`input` must be a string, URL, or Request');\n\t\t\t}\n\n\t\t\tif (this._options.prefixUrl && typeof this._input === 'string') {\n\t\t\t\tif (this._input.startsWith('/')) {\n\t\t\t\t\tthrow new Error('`input` must not begin with a slash when using `prefixUrl`');\n\t\t\t\t}\n\n\t\t\t\tif (!this._options.prefixUrl.endsWith('/')) {\n\t\t\t\t\tthis._options.prefixUrl += '/';\n\t\t\t\t}\n\n\t\t\t\tthis._input = this._options.prefixUrl + this._input;\n\t\t\t}\n\n\t\t\tif (supportsAbortController) {\n\t\t\t\tthis.abortController = new globals.AbortController();\n\t\t\t\tif (this._options.signal) {\n\t\t\t\t\tthis._options.signal.addEventListener('abort', () => {\n\t\t\t\t\t\tthis.abortController.abort();\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis._options.signal = this.abortController.signal;\n\t\t\t}\n\n\t\t\tthis.request = new globals.Request(this._input, this._options);\n\n\t\t\tif (this._options.searchParams) {\n\t\t\t\tconst url = new URL(this.request.url);\n\t\t\t\turl.search = new URLSearchParams(this._options.searchParams);\n\t\t\t\tthis.request = new globals.Request(new globals.Request(url, this.request), this._options);\n\t\t\t}\n\n\t\t\tif (this._options.json !== undefined) {\n\t\t\t\tthis._options.body = JSON.stringify(this._options.json);\n\t\t\t\tthis.request.headers.set('content-type', 'application/json');\n\t\t\t\tthis.request = new globals.Request(this.request, {body: this._options.body});\n\t\t\t}\n\n\t\t\tconst fn = async () => {\n\t\t\t\tif (this._options.timeout > maxSafeTimeout) {\n\t\t\t\t\tthrow new RangeError(`The \\`timeout\\` option cannot be greater than ${maxSafeTimeout}`);\n\t\t\t\t}\n\n\t\t\t\tawait delay(1);\n\t\t\t\tlet response = await this._fetch();\n\n\t\t\t\tfor (const hook of this._options.hooks.afterResponse) {\n\t\t\t\t\t// eslint-disable-next-line no-await-in-loop\n\t\t\t\t\tconst modifiedResponse = await hook(\n\t\t\t\t\t\tthis.request,\n\t\t\t\t\t\tthis._options,\n\t\t\t\t\t\tresponse.clone()\n\t\t\t\t\t);\n\n\t\t\t\t\tif (modifiedResponse instanceof globals.Response) {\n\t\t\t\t\t\tresponse = modifiedResponse;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!response.ok && this._options.throwHttpErrors) {\n\t\t\t\t\tthrow new HTTPError(response);\n\t\t\t\t}\n\n\t\t\t\t// If `onDownloadProgress` is passed, it uses the stream API internally\n\t\t\t\t/* istanbul ignore next */\n\t\t\t\tif (this._options.onDownloadProgress) {\n\t\t\t\t\tif (typeof this._options.onDownloadProgress !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('The `onDownloadProgress` option must be a function');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!supportsStreams) {\n\t\t\t\t\t\tthrow new Error('Streams are not supported in your environment. `ReadableStream` is missing.');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this._stream(response.clone(), this._options.onDownloadProgress);\n\t\t\t\t}\n\n\t\t\t\treturn response;\n\t\t\t};\n\n\t\t\tconst isRetriableMethod = this._options.retry.methods.includes(this.request.method.toLowerCase());\n\t\t\tconst result = isRetriableMethod ? this._retry(fn) : fn();\n\n\t\t\tfor (const [type, mimeType] of Object.entries(responseTypes)) {\n\t\t\t\tresult[type] = async () => {\n\t\t\t\t\tthis.request.headers.set('accept', this.request.headers.get('accept') || mimeType);\n\t\t\t\t\tconst response = (await result).clone();\n\t\t\t\t\treturn (type === 'json' && response.status === 204) ? '' : response[type]();\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\t_calculateRetryDelay(error) {\n\t\t\tthis._retryCount++;\n\n\t\t\tif (this._retryCount < this._options.retry.limit && !(error instanceof TimeoutError)) {\n\t\t\t\tif (error instanceof HTTPError) {\n\t\t\t\t\tif (!this._options.retry.statusCodes.includes(error.response.status)) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst retryAfter = error.response.headers.get('Retry-After');\n\t\t\t\t\tif (retryAfter && this._options.retry.afterStatusCodes.includes(error.response.status)) {\n\t\t\t\t\t\tlet after = Number(retryAfter);\n\t\t\t\t\t\tif (Number.isNaN(after)) {\n\t\t\t\t\t\t\tafter = Date.parse(retryAfter) - Date.now();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tafter *= 1000;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof this._options.retry.maxRetryAfter !== 'undefined' && after > this._options.retry.maxRetryAfter) {\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn after;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (error.response.status === 413) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst BACKOFF_FACTOR = 0.3;\n\t\t\t\treturn BACKOFF_FACTOR * (2 ** (this._retryCount - 1)) * 1000;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\tasync _retry(fn) {\n\t\t\ttry {\n\t\t\t\treturn await fn();\n\t\t\t} catch (error) {\n\t\t\t\tconst ms = Math.min(this._calculateRetryDelay(error), maxSafeTimeout);\n\t\t\t\tif (ms !== 0 && this._retryCount > 0) {\n\t\t\t\t\tawait delay(ms);\n\n\t\t\t\t\tfor (const hook of this._options.hooks.beforeRetry) {\n\t\t\t\t\t\t// eslint-disable-next-line no-await-in-loop\n\t\t\t\t\t\tconst hookResult = await hook({\n\t\t\t\t\t\t\trequest: this.request,\n\t\t\t\t\t\t\toptions: this._options,\n\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\tresponse: error.response.clone(),\n\t\t\t\t\t\t\tretryCount: this._retryCount\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// If `stop` is returned from the hook, the retry process is stopped\n\t\t\t\t\t\tif (hookResult === stop) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this._retry(fn);\n\t\t\t\t}\n\n\t\t\t\tif (this._options.throwHttpErrors) {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync _fetch() {\n\t\t\tfor (const hook of this._options.hooks.beforeRequest) {\n\t\t\t\t// eslint-disable-next-line no-await-in-loop\n\t\t\t\tconst result = await hook(this.request, this._options);\n\n\t\t\t\tif (result instanceof Request) {\n\t\t\t\t\tthis.request = result;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (result instanceof Response) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this._options.timeout === false) {\n\t\t\t\treturn globals.fetch(this.request.clone());\n\t\t\t}\n\n\t\t\treturn timeout(globals.fetch(this.request.clone()), this._options.timeout, this.abortController);\n\t\t}\n\n\t\t/* istanbul ignore next */\n\t\t_stream(response, onDownloadProgress) {\n\t\t\tconst totalBytes = Number(response.headers.get('content-length')) || 0;\n\t\t\tlet transferredBytes = 0;\n\n\t\t\treturn new globals.Response(\n\t\t\t\tnew globals.ReadableStream({\n\t\t\t\t\tstart(controller) {\n\t\t\t\t\t\tconst reader = response.body.getReader();\n\n\t\t\t\t\t\tif (onDownloadProgress) {\n\t\t\t\t\t\t\tonDownloadProgress({percent: 0, transferredBytes: 0, totalBytes}, new Uint8Array());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tasync function read() {\n\t\t\t\t\t\t\tconst {done, value} = await reader.read();\n\t\t\t\t\t\t\tif (done) {\n\t\t\t\t\t\t\t\tcontroller.close();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (onDownloadProgress) {\n\t\t\t\t\t\t\t\ttransferredBytes += value.byteLength;\n\t\t\t\t\t\t\t\tconst percent = totalBytes === 0 ? 0 : transferredBytes / totalBytes;\n\t\t\t\t\t\t\t\tonDownloadProgress({percent, transferredBytes, totalBytes}, value);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcontroller.enqueue(value);\n\t\t\t\t\t\t\tread();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tread();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\tconst validateAndMerge = (...sources) => {\n\t\tfor (const source of sources) {\n\t\t\tif ((!isObject(source) || Array.isArray(source)) && typeof source !== 'undefined') {\n\t\t\t\tthrow new TypeError('The `options` argument must be an object');\n\t\t\t}\n\t\t}\n\n\t\treturn deepMerge({}, ...sources);\n\t};\n\n\tconst createInstance = defaults => {\n\t\tconst ky = (input, options) => new Ky(input, validateAndMerge(defaults, options));\n\n\t\tfor (const method of requestMethods) {\n\t\t\tky[method] = (input, options) => new Ky(input, validateAndMerge(defaults, options, {method}));\n\t\t}\n\n\t\tky.HTTPError = HTTPError;\n\t\tky.TimeoutError = TimeoutError;\n\t\tky.create = newDefaults => createInstance(validateAndMerge(newDefaults));\n\t\tky.extend = newDefaults => createInstance(validateAndMerge(defaults, newDefaults));\n\t\tky.stop = stop;\n\n\t\treturn ky;\n\t};\n\n\tvar index = createInstance();\n\n\treturn index;\n\n})));\n","'use strict'\n\nconst URL = global.window ? window.URL : require('url').URL\nconst REGEX_HTTP_PROTOCOL = /^https?:\\/\\//i\n\nmodule.exports = url => {\n  try {\n    return REGEX_HTTP_PROTOCOL.test(new URL(url).href)\n  } catch (err) {\n    return false\n  }\n}\n","export function encode(obj, pfx) {\n\tvar k, i, tmp, str='';\n\n\tfor (k in obj) {\n\t\tif ((tmp = obj[k]) !== void 0) {\n\t\t\tif (Array.isArray(tmp)) {\n\t\t\t\tfor (i=0; i < tmp.length; i++) {\n\t\t\t\t\tstr && (str += '&');\n\t\t\t\t\tstr += encodeURIComponent(k) + '=' + encodeURIComponent(tmp[i]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tstr && (str += '&');\n\t\t\t\tstr += encodeURIComponent(k) + '=' + encodeURIComponent(tmp);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn (pfx || '') + str;\n}\n\nfunction toValue(mix) {\n\tif (!mix) return '';\n\tvar str = decodeURIComponent(mix);\n\tif (str === 'false') return false;\n\tif (str === 'true') return true;\n\treturn (+str * 0 === 0) ? (+str) : str;\n}\n\nexport function decode(str) {\n\tvar tmp, k, out={}, arr=str.split('&');\n\n\twhile (tmp = arr.shift()) {\n\t\ttmp = tmp.split('=');\n\t\tk = tmp.shift();\n\t\tif (out[k] !== void 0) {\n\t\t\tout[k] = [].concat(out[k], toValue(tmp.shift()));\n\t\t} else {\n\t\t\tout[k] = toValue(tmp.shift());\n\t\t}\n\t}\n\n\treturn out;\n}\n","'use strict';\n\nconst copyProperty = (to, from, property, ignoreNonConfigurable) => {\n\t// `Function#length` should reflect the parameters of `to` not `from` since we keep its body.\n\t// `Function#prototype` is non-writable and non-configurable so can never be modified.\n\tif (property === 'length' || property === 'prototype') {\n\t\treturn;\n\t}\n\n\tconst toDescriptor = Object.getOwnPropertyDescriptor(to, property);\n\tconst fromDescriptor = Object.getOwnPropertyDescriptor(from, property);\n\n\tif (!canCopyProperty(toDescriptor, fromDescriptor) && ignoreNonConfigurable) {\n\t\treturn;\n\t}\n\n\tObject.defineProperty(to, property, fromDescriptor);\n};\n\n// `Object.defineProperty()` throws if the property exists, is not configurable and either:\n//  - one its descriptors is changed\n//  - it is non-writable and its value is changed\nconst canCopyProperty = function (toDescriptor, fromDescriptor) {\n\treturn toDescriptor === undefined || toDescriptor.configurable || (\n\t\ttoDescriptor.writable === fromDescriptor.writable &&\n\t\ttoDescriptor.enumerable === fromDescriptor.enumerable &&\n\t\ttoDescriptor.configurable === fromDescriptor.configurable &&\n\t\t(toDescriptor.writable || toDescriptor.value === fromDescriptor.value)\n\t);\n};\n\nconst changePrototype = (to, from) => {\n\tconst fromPrototype = Object.getPrototypeOf(from);\n\tif (fromPrototype === Object.getPrototypeOf(to)) {\n\t\treturn;\n\t}\n\n\tObject.setPrototypeOf(to, fromPrototype);\n};\n\nconst wrappedToString = (withName, fromBody) => `/* Wrapped ${withName}*/\\n${fromBody}`;\n\nconst toStringDescriptor = Object.getOwnPropertyDescriptor(Function.prototype, 'toString');\nconst toStringName = Object.getOwnPropertyDescriptor(Function.prototype.toString, 'name');\n\n// We call `from.toString()` early (not lazily) to ensure `from` can be garbage collected.\n// We use `bind()` instead of a closure for the same reason.\n// Calling `from.toString()` early also allows caching it in case `to.toString()` is called several times.\nconst changeToString = (to, from, name) => {\n\tconst withName = name === '' ? '' : `with ${name.trim()}() `;\n\tconst newToString = wrappedToString.bind(null, withName, from.toString());\n\t// Ensure `to.toString.toString` is non-enumerable and has the same `same`\n\tObject.defineProperty(newToString, 'name', toStringName);\n\tObject.defineProperty(to, 'toString', {...toStringDescriptor, value: newToString});\n};\n\nconst mimicFn = (to, from, {ignoreNonConfigurable = false} = {}) => {\n\tconst {name} = to;\n\n\tfor (const property of Reflect.ownKeys(from)) {\n\t\tcopyProperty(to, from, property, ignoreNonConfigurable);\n\t}\n\n\tchangePrototype(to, from);\n\tchangeToString(to, from, name);\n\n\treturn to;\n};\n\nmodule.exports = mimicFn;\n","'use strict'\n\nmodule.exports = {\n  isFunction: obj => typeof obj === 'function',\n  isString: obj => typeof obj === 'string',\n  composeErrorMessage: (code, description) => `${code}, ${description}`,\n  inherits: (ctor, superCtor) => {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    })\n  }\n}\n","'use strict'\n\nconst {isFunction, composeErrorMessage} = require('./helpers')\n\nfunction interfaceObject (error, ...props) {\n  Object.assign(error, ...props)\n\n  error.description = isFunction(error.message) ? error.message(error) : error.message\n\n  error.message = error.code\n   ? composeErrorMessage(error.code, error.description)\n   : error.description\n}\n\nmodule.exports = interfaceObject\n","'use strict'\n\nconst cleanStack = require('clean-stack')\nconst mimicFn = require('mimic-fn')\n\nconst addErrorProps = require('./add-error-props')\nconst {isString} = require('./helpers')\n\nfunction createExtendError (ErrorClass, classProps) {\n  function ExtendError (props) {\n    const error = new ErrorClass()\n    const errorProps = isString(props) ? {message: props} : props\n    addErrorProps(error, classProps, errorProps)\n\n    error.stack = cleanStack(error.stack)\n    return error\n  }\n\n  ExtendError.prototype = ErrorClass.prototype\n  mimicFn(ExtendError, ErrorClass)\n\n  return ExtendError\n}\n\nmodule.exports = createExtendError\n","'use strict'\n\nconst {inherits} = require('./helpers')\nconst mimicFn = require('mimic-fn')\n\nconst REGEX_CLASS_NAME = /[^0-9a-zA-Z_$]/\n\nfunction createError (className) {\n  if (typeof className !== 'string') {\n    throw new TypeError('Expected className to be a string')\n  }\n\n  if (REGEX_CLASS_NAME.test(className)) {\n    throw new Error('className contains invalid characters')\n  }\n\n  function ErrorClass () {\n    Object.defineProperty(this, 'name', {\n      configurable: true,\n      value: className,\n      writable: true\n    })\n\n    Error.captureStackTrace(this, this.constructor)\n  }\n\n  inherits(ErrorClass, Error)\n  mimicFn(ErrorClass, Error)\n  return ErrorClass\n}\n\nmodule.exports = createError\n","'use strict'\n\nconst createExtendError = require('./create-extend-error')\nconst createError = require('./create-error')\n\nconst createErrorClass = ErrorClass => (className, props) => {\n  const errorClass = createError(className || ErrorClass.name)\n  return createExtendError(errorClass, props)\n}\n\nmodule.exports = createErrorClass(Error)\nmodule.exports.type = createErrorClass(TypeError)\nmodule.exports.range = createErrorClass(RangeError)\nmodule.exports.eval = createErrorClass(EvalError)\nmodule.exports.syntax = createErrorClass(SyntaxError)\nmodule.exports.reference = createErrorClass(ReferenceError)\nmodule.exports.uri = createErrorClass(URIError)\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\nmodule.exports = function isBuffer (obj) {\n  return obj != null && obj.constructor != null &&\n    typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n","var isBuffer = require('is-buffer')\n\nmodule.exports = flatten\nflatten.flatten = flatten\nflatten.unflatten = unflatten\n\nfunction keyIdentity (key) {\n  return key\n}\n\nfunction flatten (target, opts) {\n  opts = opts || {}\n\n  const delimiter = opts.delimiter || '.'\n  const maxDepth = opts.maxDepth\n  const transformKey = opts.transformKey || keyIdentity\n  const output = {}\n\n  function step (object, prev, currentDepth) {\n    currentDepth = currentDepth || 1\n    Object.keys(object).forEach(function (key) {\n      const value = object[key]\n      const isarray = opts.safe && Array.isArray(value)\n      const type = Object.prototype.toString.call(value)\n      const isbuffer = isBuffer(value)\n      const isobject = (\n        type === '[object Object]' ||\n        type === '[object Array]'\n      )\n\n      const newKey = prev\n        ? prev + delimiter + transformKey(key)\n        : transformKey(key)\n\n      if (!isarray && !isbuffer && isobject && Object.keys(value).length &&\n        (!opts.maxDepth || currentDepth < maxDepth)) {\n        return step(value, newKey, currentDepth + 1)\n      }\n\n      output[newKey] = value\n    })\n  }\n\n  step(target)\n\n  return output\n}\n\nfunction unflatten (target, opts) {\n  opts = opts || {}\n\n  const delimiter = opts.delimiter || '.'\n  const overwrite = opts.overwrite || false\n  const transformKey = opts.transformKey || keyIdentity\n  const result = {}\n\n  const isbuffer = isBuffer(target)\n  if (isbuffer || Object.prototype.toString.call(target) !== '[object Object]') {\n    return target\n  }\n\n  // safely ensure that the key is\n  // an integer.\n  function getkey (key) {\n    const parsedKey = Number(key)\n\n    return (\n      isNaN(parsedKey) ||\n      key.indexOf('.') !== -1 ||\n      opts.object\n    ) ? key\n      : parsedKey\n  }\n\n  function addKeys (keyPrefix, recipient, target) {\n    return Object.keys(target).reduce(function (result, key) {\n      result[keyPrefix + delimiter + key] = target[key]\n\n      return result\n    }, recipient)\n  }\n\n  function isEmpty (val) {\n    const type = Object.prototype.toString.call(val)\n    const isArray = type === '[object Array]'\n    const isObject = type === '[object Object]'\n\n    if (!val) {\n      return true\n    } else if (isArray) {\n      return !val.length\n    } else if (isObject) {\n      return !Object.keys(val).length\n    }\n  }\n\n  target = Object.keys(target).reduce((result, key) => {\n    const type = Object.prototype.toString.call(target[key])\n    const isObject = (type === '[object Object]' || type === '[object Array]')\n    if (!isObject || isEmpty(target[key])) {\n      result[key] = target[key]\n      return result\n    } else {\n      return addKeys(\n        key,\n        result,\n        flatten(target[key], opts)\n      )\n    }\n  }, {})\n\n  Object.keys(target).forEach(function (key) {\n    const split = key.split(delimiter).map(transformKey)\n    let key1 = getkey(split.shift())\n    let key2 = getkey(split[0])\n    let recipient = result\n\n    while (key2 !== undefined) {\n      const type = Object.prototype.toString.call(recipient[key1])\n      const isobject = (\n        type === '[object Object]' ||\n        type === '[object Array]'\n      )\n\n      // do not write over falsey, non-undefined values if overwrite is false\n      if (!overwrite && !isobject && typeof recipient[key1] !== 'undefined') {\n        return\n      }\n\n      if ((overwrite && !isobject) || (!overwrite && recipient[key1] == null)) {\n        recipient[key1] = (\n          typeof key2 === 'number' &&\n          !opts.object ? [] : {}\n        )\n      }\n\n      recipient = recipient[key1]\n      if (split.length > 0) {\n        key1 = getkey(split.shift())\n        key2 = getkey(split[0])\n      }\n    }\n\n    // unflatten again for 'messy objects'\n    recipient[key1] = unflatten(target[key], opts)\n  })\n\n  return result\n}\n","const ENDPOINT = {\n  FREE: 'https://api.microlink.io',\n  PRO: 'https://pro.microlink.io'\n}\n\nconst pickBy = obj => {\n  Object.keys(obj).forEach(key => obj[key] == null && delete obj[key])\n  return obj\n}\n\nconst isTimeoutError = (err, statusCode) =>\n  // client side error\n  err.name === 'TimeoutError' ||\n  // server side error\n  (err.name === 'HTTPError' && statusCode.toString()[0] === '5') ||\n  // browser side unexpected error\n  err.type === 'invalid-json'\n\nconst factory = ({ VERSION, MicrolinkError, isUrlHttp, stringify, got, flatten }) => {\n  const assertUrl = (url = '') => {\n    if (!isUrlHttp(url)) {\n      const message = `The \\`url\\` as \\`${url}\\` is not valid. Ensure it has protocol (http or https) and hostname.`\n      throw new MicrolinkError({\n        url,\n        data: { url: message },\n        status: 'fail',\n        code: 'EINVALURLCLIENT',\n        message,\n        more: 'https://microlink.io/docs/api/api-parameters/url'\n      })\n    }\n  }\n\n  const mapRules = rules => {\n    if (typeof rules !== 'object') return\n    const flatRules = flatten(rules)\n    return Object.keys(flatRules).reduce(\n      (acc, key) => ({ ...acc, [`data.${key}`]: flatRules[key] }),\n      {}\n    )\n  }\n\n  const fetchFromApi = async (apiUrl, opts = {}) => {\n    try {\n      const response = await got(apiUrl, opts)\n      const { body } = response\n      return { ...body, response }\n    } catch (err) {\n      const { name, message: rawMessage, response = {} } = err\n      const { statusCode = 500, body: rawBody, headers, url: uri = apiUrl } = response\n      const retryTime = Number((opts.retry * opts.timeout).toFixed(0))\n      const isClientError = name === 'TimeoutError'\n\n      if (isTimeoutError(err, statusCode)) {\n        const message = `The request reached timeout after ${retryTime}ms.`\n        throw new MicrolinkError({\n          url: uri,\n          data: { url: message },\n          status: 'fail',\n          code: isClientError ? 'ETIMEOUTCLIENT' : 'ETIMEOUT',\n          message,\n          more: `https://microlink.io/${isClientError ? 'etimeoutclient' : 'etimeout'}`,\n          statusCode,\n          headers\n        })\n      }\n\n      const body = rawBody\n        ? typeof rawBody === 'string' || Buffer.isBuffer(rawBody)\n          ? JSON.parse(rawBody)\n          : rawBody\n        : { message: rawMessage, status: 'fail' }\n\n      throw MicrolinkError({\n        ...body,\n        message: body.message,\n        url: uri,\n        statusCode,\n        headers\n      })\n    }\n  }\n\n  const getApiUrl = (\n    url,\n    {\n      data,\n      apiKey,\n      endpoint,\n      isStream = false,\n      retry = 3,\n      timeout = 30000,\n      responseType = 'json',\n      ...opts\n    } = {}\n  ) => {\n    const isPro = !!apiKey\n    const apiEndpoint = endpoint || ENDPOINT[isPro ? 'PRO' : 'FREE']\n\n    const apiUrl = `${apiEndpoint}?${stringify({\n      url,\n      ...mapRules(data),\n      ...flatten(pickBy(opts))\n    })}`\n\n    const headers = isPro ? { 'x-api-key': apiKey } : {}\n    return [apiUrl, { retry, timeout, responseType, isStream, headers }]\n  }\n\n  const mql = async (url, opts = {}) => {\n    assertUrl(url)\n    const [apiUrl, fetchOpts] = getApiUrl(url, opts)\n    return fetchFromApi(apiUrl, { ...opts, ...fetchOpts })\n  }\n\n  mql.MicrolinkError = MicrolinkError\n  mql.getApiUrl = getApiUrl\n  mql.fetchFromApi = fetchFromApi\n  mql.mapRules = mapRules\n  mql.version = VERSION\n  mql.stream = (url, opts) => got.stream(url, { retry: 3, timeout: 30000, ...opts })\n\n  return mql\n}\n\nmodule.exports = factory\n","'use strict'\n\nconst ky = require('ky-universal').default || require('ky-universal')\nconst isUrlHttp = require('is-url-http/lightweight')\nconst { encode: stringify } = require('qss')\nconst whoops = require('whoops')\nconst flatten = require('flat')\n\nconst factory = require('./factory')\n\nconst MicrolinkError = whoops('MicrolinkError')\n\nconst got = async (url, { responseType, ...opts }) => {\n  try {\n    const response = await ky(url, opts)\n    const body = await response.json()\n    const { headers, status: statusCode, statusText: statusMessage } = response\n    return { url: response.url, body, headers, statusCode, statusMessage }\n  } catch (err) {\n    if (err.response) {\n      const { response } = err\n      err.response = { ...response, statusCode: response.status, body: await response.json() }\n    }\n    throw err\n  }\n}\n\nmodule.exports = factory({\n  MicrolinkError,\n  isUrlHttp,\n  stringify,\n  got,\n  flatten,\n  VERSION: '__VERSION__'\n})\n"],"names":["module","globals","getGlobal","property","self","window","global","globalThis","globalProperties","Object","defineProperty","[object Object]","globalObject","value","bind","isObject","supportsAbortController","AbortController","supportsStreams","ReadableStream","deepMerge","sources","returnValue","source","Array","isArray","key","entries","Reflect","has","requestMethods","responseTypes","json","text","formData","arrayBuffer","blob","retryAfterStatusCodes","stop","Symbol","HTTPError","Error","response","super","statusText","this","name","TimeoutError","delay","ms","Promise","resolve","setTimeout","normalizeRequestMethod","input","includes","toUpperCase","defaultRetryOptions","limit","methods","statusCodes","afterStatusCodes","normalizeRetryOptions","retry","Ky","options","_retryCount","_input","_options","credentials","hooks","beforeRequest","beforeRetry","afterResponse","method","prefixUrl","String","throwHttpErrors","timeout","URL","Request","TypeError","startsWith","endsWith","abortController","signal","addEventListener","abort","request","searchParams","url","search","URLSearchParams","undefined","body","JSON","stringify","headers","set","fn","async","RangeError","_fetch","hook","modifiedResponse","clone","Response","ok","onDownloadProgress","_stream","result","toLowerCase","_retry","type","mimeType","get","status","error","retryAfter","after","Number","isNaN","Date","parse","now","maxRetryAfter","Math","min","_calculateRetryDelay","retryCount","fetch","promise","reject","timeoutID","then","catch","clearTimeout","totalBytes","transferredBytes","controller","reader","getReader","percent","Uint8Array","read","done","close","byteLength","enqueue","validateAndMerge","createInstance","defaults","ky","create","newDefaults","extend","factory","require$$0","REGEX_HTTP_PROTOCOL","toValue","mix","str","decodeURIComponent","obj","pfx","k","i","tmp","length","encodeURIComponent","out","arr","split","shift","concat","copyProperty","to","from","ignoreNonConfigurable","toDescriptor","getOwnPropertyDescriptor","fromDescriptor","canCopyProperty","configurable","writable","enumerable","wrappedToString","withName","fromBody","toStringDescriptor","Function","prototype","toStringName","toString","ownKeys","fromPrototype","getPrototypeOf","setPrototypeOf","changePrototype","trim","newToString","changeToString","isFunction","isString","composeErrorMessage","code","description","inherits","ctor","superCtor","super_","constructor","props","assign","message","ErrorClass","classProps","ExtendError","errorProps","addErrorProps","stack","cleanStack","mimicFn","REGEX_CLASS_NAME","className","test","captureStackTrace","createErrorClass","errorClass","createError","createExtendError","EvalError","SyntaxError","ReferenceError","URIError","isBuffer","flatten","keyIdentity","target","opts","delimiter","maxDepth","transformKey","output","step","object","prev","currentDepth","keys","forEach","isarray","safe","call","isbuffer","isobject","newKey","unflatten","overwrite","getkey","parsedKey","indexOf","reduce","val","isEmpty","keyPrefix","recipient","addKeys","map","key1","key2","ENDPOINT","FREE","PRO","VERSION","MicrolinkError","isUrlHttp","got","mapRules","rules","flatRules","acc","fetchFromApi","apiUrl","err","rawMessage","statusCode","rawBody","uri","retryTime","toFixed","isClientError","isTimeoutError","data","more","Buffer","getApiUrl","apiKey","endpoint","isStream","responseType","isPro","x-api-key","mql","assertUrl","fetchOpts","version","stream","default","encode","require$$1","whoops","href","statusMessage"],"mappings":"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"}